<!DOCTYPE html>
<html>
<head>
  <title>Michael Ashby | DBC</title>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="style_modern.css">
</head>

<body>
<header>
  <div id="logo_name">
    <a href="http://ashbymichael.github.io"><h1>Michael Ashby</h1>
    <h2>Developer-in-Training</h2></a>
  </div>
  <nav>
    <ul id="nav_menu">
      <a href="../index.html"><li>About</li></a>
      <a href="index.html"><li class="current">Blog</li></a>
      <a href="#"><li>Portfolio</li></a>
    </ul>
  </nav>
</header>

<main>

  <div class="blog-entry">
    <h1>Week 4 - Enumerable Methods</h1>
    <h4>2015/6/15</h4>
    <p>
      I'd like to talk about the experience I had learning to separate #each, #map, and #map!, and what it taought me about the return values of methods and the difference between destructive and non-destructive methods.
    </p>

    <p>
      It was when I first started studying Ruby, and I was working on some problem.  I'm simplifying for clarity, and because I can't necessarily remember exactly what I was doing, but let's say I needed all values in an array larger than 5 reduced to 5.  My original approach looked something like this:
    </p>
    <p class="code_block">
      def larger_than_five(arry)
        <br>&nbsp; arry.each { |number| number = 5 if number > 5 }
      <br>end
    </p>

    <p>
      You'll probably notice a few things wrong with this method, but the problem I had in particular is that whenever I ran this method it produced no errors, it just didn't do anything at all.  After digging around a little, I figured out that it was because the value an #each statement resolves to, or returns, is the original, unaltered array.  Because the #each loop is the last statement in the method, it always returns the orignal, unaltered array.
    </p>

    <p>
      The upshot is that #each is not useful if you want to modify the array itself, but it is useful for its effects on other objects.  An accumulators variable could, for example, add the value of each item in an array to itself.
    </p>

    <p class="code_block">
      accumulator = 0
      <br>arry.each do |number|
        <br>&nbsp; accumulator += number
      <br>end
    </p>

    <p>
      So then I started going through the Ruby-doc for the Array class, looking for the method to use when you want to get in there and really just transmogrify an array.  Turns out what I wanted was #map.  #map and #each in many ways do the same thing, but with one key difference: #map returns a new array.  Trying the same method with #map produced the results I expected:
    </p>

    <p class="code_block">
      def larger_than_five(arry)
        <br>&nbsp;arry.map { |number| number = 5 if number > 5 }
      <br>end
    </p>

    <p>
      This is perfect if you want to assign the value of this method to a variable and still have the original array available later.  The destructive variant, #map!, alters the original array, and then returns that.
    </p>
  </div>


</main>

</body>
<span class="code"></span>
</html>

<!--
Above the line:
The <span class="code">each</span>, <span class="code">map</span> and <span class="code">map!</span> methods are similar, but they differ in some very important ways.
-->























,
